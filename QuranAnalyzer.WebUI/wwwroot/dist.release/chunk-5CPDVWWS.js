import{a as W,b as S,c as V}from"./chunk-KH7ZNKZE.js";import{a as N}from"./chunk-EMKQGYXC.js";import{e as T}from"./chunk-PU6LYOEU.js";function y(r,i){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,e){return o.__proto__=e,o},y(r,i)}function g(r,i){r.prototype=Object.create(i.prototype),r.prototype.constructor=r,y(r,i)}var b=T(N()),_=T(W());var D={disabled:!1};var w=T(N()),E=w.default.createContext(null);var G=function(i){return i.scrollTop};var P="unmounted",c="exited",m="entering",v="entered",M="exiting",d=function(r){g(i,r);function i(o,e){var t;t=r.call(this,o,e)||this;var n=e,s=n&&!n.isMounting?o.enter:o.appear,p;return t.appearStatus=null,o.in?s?(p=c,t.appearStatus=m):p=v:o.unmountOnExit||o.mountOnEnter?p=P:p=c,t.state={status:p},t.nextCallback=null,t}i.getDerivedStateFromProps=function(e,t){var n=e.in;return n&&t.status===P?{status:c}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==m&&n!==v&&(t=m):(n===m||n===v)&&(t=M)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e=this.props.timeout,t,n,s;return t=n=s=e,e!=null&&typeof e!="number"&&(t=e.exit,n=e.enter,s=e.appear!==void 0?e.appear:n),{exit:t,enter:n,appear:s}},a.updateStatus=function(e,t){if(e===void 0&&(e=!1),t!==null)if(this.cancelNextCallback(),t===m){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:_.default.findDOMNode(this);n&&G(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:P})},a.performEnter=function(e){var t=this,n=this.props.enter,s=this.context?this.context.isMounting:e,p=this.props.nodeRef?[s]:[_.default.findDOMNode(this),s],u=p[0],l=p[1],R=this.getTimeouts(),I=s?R.appear:R.enter;if(!e&&!n||D.disabled){this.safeSetState({status:v},function(){t.props.onEntered(u)});return}this.props.onEnter(u,l),this.safeSetState({status:m},function(){t.props.onEntering(u,l),t.onTransitionEnd(I,function(){t.safeSetState({status:v},function(){t.props.onEntered(u,l)})})})},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),s=this.props.nodeRef?void 0:_.default.findDOMNode(this);if(!t||D.disabled){this.safeSetState({status:c},function(){e.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:M},function(){e.props.onExiting(s),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:c},function(){e.props.onExited(s)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:_.default.findDOMNode(this),s=e==null&&!this.props.addEndListener;if(!n||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],u=p[0],l=p[1];this.props.addEndListener(u,l)}e!=null&&setTimeout(this.nextCallback,e)},a.render=function(){var e=this.state.status;if(e===P)return null;var t=this.props,n=t.children,s=t.in,p=t.mountOnEnter,u=t.unmountOnExit,l=t.appear,R=t.enter,I=t.exit,B=t.timeout,J=t.addEndListener,Q=t.onEnter,Y=t.onEntering,Z=t.onEntered,$=t.onExit,K=t.onExiting,tt=t.onExited,et=t.nodeRef,F=S(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return b.default.createElement(E.Provider,{value:null},typeof n=="function"?n(e,F):b.default.cloneElement(b.default.Children.only(n),F))},i}(b.default.Component);d.contextType=E;d.propTypes={};function x(){}d.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:x,onEntering:x,onEntered:x,onExit:x,onExiting:x,onExited:x};d.UNMOUNTED=P;d.EXITED=c;d.ENTERING=m;d.ENTERED=v;d.EXITING=M;var q=d;function k(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var O=T(N());var f=T(N());function C(r,i){var a=function(t){return i&&(0,f.isValidElement)(t)?i(t):t},o=Object.create(null);return r&&f.Children.map(r,function(e){return e}).forEach(function(e){o[e.key]=a(e)}),o}function X(r,i){r=r||{},i=i||{};function a(l){return l in i?i[l]:r[l]}var o=Object.create(null),e=[];for(var t in r)t in i?e.length&&(o[t]=e,e=[]):e.push(t);var n,s={};for(var p in i){if(o[p])for(n=0;n<o[p].length;n++){var u=o[p][n];s[o[p][n]]=a(u)}s[p]=a(p)}for(n=0;n<e.length;n++)s[e[n]]=a(e[n]);return s}function h(r,i,a){return a[i]!=null?a[i]:r.props[i]}function U(r,i){return C(r.children,function(a){return(0,f.cloneElement)(a,{onExited:i.bind(null,a),in:!0,appear:h(a,"appear",r),enter:h(a,"enter",r),exit:h(a,"exit",r)})})}function j(r,i,a){var o=C(r.children),e=X(i,o);return Object.keys(e).forEach(function(t){var n=e[t];if(!!(0,f.isValidElement)(n)){var s=t in i,p=t in o,u=i[t],l=(0,f.isValidElement)(u)&&!u.props.in;p&&(!s||l)?e[t]=(0,f.cloneElement)(n,{onExited:a.bind(null,n),in:!0,exit:h(n,"exit",r),enter:h(n,"enter",r)}):!p&&s&&!l?e[t]=(0,f.cloneElement)(n,{in:!1}):p&&s&&(0,f.isValidElement)(u)&&(e[t]=(0,f.cloneElement)(n,{onExited:a.bind(null,n),in:u.props.in,exit:h(n,"exit",r),enter:h(n,"enter",r)}))}}),e}var z=Object.values||function(r){return Object.keys(r).map(function(i){return r[i]})},A={component:"div",childFactory:function(i){return i}},L=function(r){g(i,r);function i(o,e){var t;t=r.call(this,o,e)||this;var n=t.handleExited.bind(k(t));return t.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},t}var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,t){var n=t.children,s=t.handleExited,p=t.firstRender;return{children:p?U(e,s):j(e,n,s),firstRender:!1}},a.handleExited=function(e,t){var n=C(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(s){var p=V({},s.children);return delete p[e.key],{children:p}}))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,s=S(e,["component","childFactory"]),p=this.state.contextValue,u=z(this.state.children).map(n);return delete s.appear,delete s.enter,delete s.exit,t===null?O.default.createElement(E.Provider,{value:p},u):O.default.createElement(E.Provider,{value:p},O.default.createElement(t,s,u))},i}(O.default.Component);L.propTypes={};L.defaultProps=A;var H=L;export{q as a,H as b};
